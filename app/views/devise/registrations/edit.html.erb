<!-- app/views/devise/registrations/edit.html.erb -->
<h2>Edit Profile</h2>
<%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <%= f.error_notification %>
  <div class="d-flex justify-content-center mb-4">
    <div class="position-relative">
      <% if resource.profile_pic.attached? %>
        <%= cl_image_tag resource.profile_pic.key, class: "rounded-circle img-thumbnail", style: "width: 150px; height: 150px; object-fit: cover;", alt: "Profile picture" %>
      <% else %>
        <%= image_tag "https://kitt.lewagon.com/placeholder/users/ssaunier", class: "rounded-circle img-thumbnail", style: "width: 150px; height: 150px; object-fit: cover;", alt: "Default profile picture" %>
      <% end %>
      <button class="btn btn-light position-absolute bottom-0 end-0">
        <i class="fas fa-plus"></i>
      </button>
    </div>
  </div>
  <div class="form-inputs">
    <%= f.input :first_name, required: true, autofocus: true, input_html: { class: 'text-input' } %>
    <%= f.input :last_name, required: true, input_html: { class: 'text-input' } %>
    <%= f.input :year_of_arrival, as: :date, required: true, input_html: { class: 'text-input' } %>
    <%= f.input :email, required: true, input_html: { class: 'text-input' } %>
    <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
      <p>Currently waiting confirmation for: <%= resource.unconfirmed_email %></p>
    <% end %>
    <%= f.input :password, hint: "Leave it blank if you don't want to change it", required: false, input_html: { class: 'text-input' } %>
    <%= f.input :password_confirmation, required: false, input_html: { class: 'text-input' } %>
    <%= f.input :current_password, hint: "We need your current password to confirm your changes", required: true, input_html: { class: 'text-input' } %>
    <%= f.input :profile_pic, as: :file, input_html: { class: 'text-input' } %>
  </div>
  <div class="edit-card-button d-flex button-styling">
    <div class="button-styling"> <%= f.button :submit, "Update" %> <%= button_to "Cancel Your Account", "#", class: "btn btn-danger", id: "cancel-account", data: { confirm: "Are you sure?", turbo_confirm: "Are you sure?" } %> <%= link_to "Back", my_events_path, class: "btn btn-primary", id: "back" %></div>
  </div>
<% end %>
